<!DOCTYPE HTML PUBLIC '-//W3C//DTD HTML 4.01//EN' 'http://www.w3.org/TR/html4/strict.dtd'>
<html>
<head>
<meta http-equiv='Content-Type' content='text/html; charset=utf-8' />
<link rel='stylesheet' href='C:\Users\lpha\AppData\Roaming\MarkDownSharpEditor\css\hibara.org.css' type='text/css' />
<style type='text/css'>
	 ._mk {background-color:#FFFFC8}
</style>
<title>setup.md</title>
</head>
<body>
<h1>学科PCのセットアップ</h1>
<p>Ubuntu 14.04 LTS</p>
<h2>日本語入力</h2>
<p>システム設定&gt;言語サポート&gt;キーボード入力に使うIMシステム：Mozc</p>
<ul>
<li><code>$ ibus-setup</code> で出てくるポップアップに書いてあった</li>
<li>✔日本語入力ができるようになった</li>
</ul>
<h2>Dvorak配列に変更する</h2>
<h3>Mozcの設定</h3>
<p>(手順)</p>
<ol>
<li>テキスト入力設定から「日本語(Mozc)」を選んでおく</li>
<li><code>sudo vi /usr/share/ibus/component/mozc.xml</code> でlayout要素を<code>us(dvorak)</code>にする</li>
<li>再起動する</li>
</ol>
<p>(TIPS)</p>
<ul>
<li><a href="http://kekke59.hatenablog.com/entry/2014/12/29/150649">参考サイト</a></li>
<li>✔ 直接入力、日本語入力共にDvorak配列になった</li>
<li>
× 「半全」キーが【`~】キー扱いになってしまうので使えなくなる
  Mozcプロパティ&gt;一般&gt;キー設定の選択：ATOKにすると「変換」キーで直接入力と日本語入力が切り替えられるのでこれでしのぐ + ？ PageDownキーを押すとなぜか~が出力されてしまう
</li>
<li>？ MozcプロパティのウィンドウがUnityじゃなくてWindowsXPっぽいやつになってしまった</li>
<li>学科PCは、CapsLockがControlキーとして使えるような設定がされているらしいが、それは消えずに使えている(ctrl(nocaps)を読み込んでいるっぽい)</li>
</ul>
<p><code>$ xkeymap
(略)
control      Control_L (0x25),  Control_L (0x42),  Control_R (0x69)
(略)</code>
(キーコード0x25はAの左にあるキー=CapsLock英数)</p>
<h3>余っているキーの割り当て</h3>
<ul>
<li>
layout要素を<code>jp(dvorak)</code>にすると、「￥|」キーや「＼_」キーが使えるようになるが、記号の配列が大きく異なる
<ul>
<li><a href="https://sites.google.com/site/tetsuroweb/home/software/ubuntu/tips/japanese-keyboard-layout">参考サイト</a></li>
</ul>
</li>
<li><code>key &lt;AB11&gt;</code>が「＼_」キー、<code>key &lt;AE13&gt;</code>が「￥|」キーのようなのでこれらを割り当てる</li>
<li>
<a href="http://blog.cnu.jp/blog/2014/05/12/use-xkb/">xkbでキーバインドを変更する</a>と<a href="http://did2memo.net/2015/07/20/ubuntu-xkb-muhenkan-hotkey/">Ubuntu：「無変換+○」にカーソル移動系ホットキーを設定する（xkb編）</a>を参考に以下のようにキーを変更
<ul>
<li>「}]」キーを押すと【＼|】が出力されるのを、【~`】が出力されるように変更</li>
</ul>
</li>
</ul>
<div class='_mk'><!-- edit -->	 <ul></div>
<li>
追い出された【＼|】を出力する機能を「￥|」キーに変更
<ul>
<li>「＼_」キーはとりあえず未設定</li>
<li>「半全」キーはとりあえず保留(【~`】を出力するまま)</li>
</ul>
</li>
</ul>
<p><code>$ mkdir ~/.xkb
$ mkdir ~/.xkb/symbols
$ mkdir ~/.xkb/keymap
$ setxkbmap -print &gt; ~/.xkb/keymap/mykbd
$ vi ~/.xkb/symbols/mykeys (以下のファイルを作成)
$ vi ~/.xkb/keymap/mykbd (xkb_symbolsのincludeの文字列の最後に`+mykeys(addkeys)`を追加)
$ xkbcomp -I$HOME/.xkb ~/.xkb/keymap/mykbd $DISPLAY</code></p>
<p><code>~/.xkb/keymap/mykbd
partial modifier_keys
  replace key &lt;AE13&gt; {[yen,bar]};
  replace key &lt;AC12&gt; {[grave, asciitilde});
};</code>
 + Warningがたくさん出るが、ErrorがなければOK(即反映される)</p>
<h2>DvorakJPの導入</h2>
<ul>
<li>Mozcプロパティ&gt;一般&gt;ローマ字テーブル 編集...&gt;編集&gt;インポート でDvorakJPローマ字テーブルを入れる</li>
<li>Mozcプロパティ&gt;入力補助&gt;シフトキーでの入力切替をオフ にしないとアルファベットのShift段で半角アルファベット大文字が出てしまう</li>
</ul>
<h2>マウスポインタが消える</h2>
<ul>
<li>
起動中に音量ボタンを押したら(?)マウスポインタが描画されなくなった(描画されないだけで動かせる)
<ul>
<li>再起動で解決</li>
<li>この手のはいろいろ相性問題があるらしくて、根本的な原因はわからず</li>
</ul>
</li>
</ul>
</body>
</html>
